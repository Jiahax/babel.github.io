---
layout: post
title:  "What's in 7.0"
author: Henry Zhu
date:   2017-02-14 12:00:00
categories: announcements
share_text: "What's in 7.0"
---

If you didn't know already, we're planning on releasing a 7.0 version soon! I'd like to go over some notable changes and a few things we are still working out!

> For more specific changes, please check out our upgrade guide (will be updated)!

## ðŸ’¥ Breaking Changes

### [#4315](https://github.com/babel/babel/issues/4315) Drop support for unmaintained Node versions: 0.10, 0.12, 5

When OSS maintainers want to move the project forward and make breaking changes, it may come at the cost of more hassle for their users.

A major version bump *is* just a number, but it can cause unnecessary pain for users/library authors (including ourselves since we'd want to upgrade Babel itself to run on Babel 7 at some point right). We didn't want to do it just for this change.

But by dropping Node 0.12, we can use tools that support a minimum of Node 4 as well such as ESLint, Yarn, and Jest (+Lerna). And other dependencies that have also dropped can be available for us to use as well.

### [#5128](https://github.com/babel/babel/issues/5128) Babel presets must export a function as the default export

We want to standardize on requiring presets to be functions that return a Babel config object (rather than just the object).

Before (invalid in 7.0)

```js
export default {
  plugins: ['plugin-a']
};
```

After

```js
export default function() { // or module.exports
  return {
    plugins: ['plugin-a']
  };
}
```

## Meta

### [#5218](https://github.com/babel/babel/pull/5218) Remove `babel-runtime` from Babel dependencies

Babel itself doesn't have that many external dependencies, but in 6.x [each package has a dependency on `babel-runtime`](https://github.com/babel/babel/blob/958f72ddc28e2f5d02adf44eadd2b1265dd0fa4d/packages/babel-plugin-transform-es2015-arrow-functions/package.json#L12) so that we can use built-ins such as `Symbol`, `Map`, `Set` without using a polyfill. By changing the minimum supported version of Node to v4 (where those built-ins are supported natively), we can drop the dependency entirely.

> This is an issue on npm 2 (we didn't recommended it's use with Babel 6) and yarn, but not npm 3 due to it's deduping behavior.

With [Create React App](https://github.com/facebookincubator/create-react-app) the size varied greatly based on if `babel-runtime` was hoisted.

- `node_modules` for npm 3: ~120MB
- `node_modules` for Yarn (<`0.21.0`): ~587MB
- `node_modules` for Yarn (<`0.21.0`) with hoisted `babel-runtime`: ~157MB
- `node_modules` for Yarn + [PR #2676](https://github.com/yarnpkg/yarn/pull/2676): 118MB

So although this issue is fixed "upstream" by using npm 3/Yarn, we can simply drop all our own dependencies on `babel-runtime`.

### [#5224](https://github.com/babel/babel/pull/5224) Start publishing with Lerna's `independent` mode

## ðŸš€ New Feature

### [#3683](https://github.com/babel/babel/pull/3683) Add `transform-unicode-property-regex` to the Stage 2 preset

## ðŸ¤” Questions

### Future of Package Versioning

https://github.com/babel/babylon/issues/275

### Using npm Scoped Packages

https://twitter.com/left_pad/status/821551189166878722

### Dropping the "env" option in `.babelrc`

https://github.com/babel/babel/issues/5276

### `.babelrc.js`

https://github.com/babel/babel/issues/4630

### `external-helpers`, `transform-runtime`, `babel-polyfill`

> regeneratorRuntime is not defined

### Removal of Stage X presets

https://github.com/babel/babel/issues/4914
https://github.com/babel/babel/issues/5128

### Removal of ES20xx presets

https://github.com/babel/babel-preset-env
